<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:golive="http://java.sun.com/jsf/composite/components"
	template="/resources/templates/layoutTemplate.xhtml">

	<ui:define name="linkRefs">
		<h:outputStylesheet name="css/login/style_login.css" />
	
	</ui:define>

	<ui:define name="header">
		<div id="headerDiv" class="divHeaderNavegacao headerMainPageNavegacao" />
	</ui:define>

	<ui:define name="main">
		<h:form id="defineMain" styleClass="little-font">
			<p:growl id="growl" showDetail="true" sticky="true" />

			<div id="loginDiv" class="loginBackground loginDivSize">

				<div id="usuarioLogadoImage" class="usuarioDivGrid">

					<div id="usuarioLogadoImage" class="rowTitleUsuarioGrid">
						<div style="float: left">
							<h:graphicImage
								value="/resources/images/stylistica-icons-set/64x64/user.png" />
						</div>
						<div class="usuarioLoginGrid">
							<h:outputLabel 
								value="#{loginBean.labels.getField('label.login')} #{loginBean.labels.getField('label.usuario')}"
								styleClass="little-medium white-font" />
						</div>
					</div>
					<h:panelGrid id="panelGridLogin" columns="2" cellpadding="5px;"
						styleClass="panelGrid">

						<p:outputLabel id="loginOutputText" for="loginInputField"
							value="#{loginBean.labels.getField('label.usuario')}"
							styleClass="outputLabel" />

						<p:inputText id="loginInputField" value="#{loginBean.login}" onblur="#{loginBean.verificarUsuarioPorLogin()}"
							styleClass="medium-field">
							<p:ajax event="blur"
								listener="#{loginBean.verificarUsuarioPorLogin()}"
								update="assinantesSelectOneMenu" onstart="load()" onsuccess="unLoad()" />
						</p:inputText>

						<p:outputLabel id="senhaOutputText" for="senhaSecretInputField"
							value="#{loginBean.labels.getField('label.senha')}"
							styleClass="outputLabel" />

						<p:password id="senhaSecretInputField" value="#{loginBean.senha}"
							styleClass="little-field" />

						<p:outputLabel id="assinantesOutputText"
							for="assinantesSelectOneMenu" 
							value="#{loginBean.labels.getField('label.assinantes')}"
							styleClass="outputLabel" />

						<p:selectOneMenu id="assinantesSelectOneMenu"
							value="#{loginBean.assinante}" style="width: 308px" effect="fold">
							<f:selectItem itemLabel="" itemValue=""/>
							<c:forEach items="#{loginBean.carregadoOnBlur.empresas}" var="empresas">
								<f:selectItem itemValue="#{empresas}" itemLabel="#{empresas}"/>
							</c:forEach>
								
						</p:selectOneMenu>
						<p:spacer />
						<h:panelGrid columns="2" styleClass="panelGridButtons">
							<p:commandButton
								value="#{loginBean.labels.getField('label.conectar')}" ajax="false"
								onstart="PF('loading').show()" onsuccess="PF('loading').hide()"
								action="#{loginBean.logar}" styleClass="buttons">
							</p:commandButton>

							<p:commandButton
								value="#{loginBean.labels.getField('label.limpar')}" 
								action="#{loginBean.limpar}" styleClass="buttons"
								update="senhaSecretInputField, loginInputField, assinantesSelectOneMenu" />
						</h:panelGrid>

						<p:spacer rendered="#{loginBean.errouLogin}"
							styleClass="linkSenha" id="spacerLink" />
						<p:commandLink id="linkEsqueceuSenha" styleClass="linkSenha"
							onclick="PF('dialogSenha').show();" rendered="#{loginBean.errouLogin}">
							<h:outputLabel 
								value="#{loginBean.labels.getField('label.esqueceu.senha')}"
								styleClass="linkSenha little-font" />
						</p:commandLink>
					</h:panelGrid>

				</div>
			</div>

			<p:dialog header="Esqueci minha senha" widgetVar="dialogSenha" height="300" width="300"
				closeOnEscape="true" resizable="false" draggable="false"  showHeader="false" >
				<h:outputText value="This is a Modal Dialog." />
			</p:dialog>

			<golive:loading name="loading" />
		</h:form>
	</ui:define>

</ui:composition>